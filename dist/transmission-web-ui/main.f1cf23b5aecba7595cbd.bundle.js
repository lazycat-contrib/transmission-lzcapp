/*! For license information please see main.f1cf23b5aecba7595cbd.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktrguing=self.webpackChunktrguing||[]).push([[179],{5769:()=>{},53:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<i(s,t)))break e;e[a]=t,e[n]=s,n=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,r=s>>>1;a<r;){var o=2*(a+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<s&&0>i(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,p=3,h=!1,v=!1,b=!1,m="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=a(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function S(e){if(b=!1,w(e),!v)if(null!==a(c))v=!0,I(T);else{var t=a(u);null!==t&&M(S,t.startTime-e)}}function T(e,n){v=!1,b&&(b=!1,g(E),E=-1),h=!0;var i=p;try{for(w(n),d=a(c);null!==d&&(!(d.expirationTime>n)||e&&!O());){var r=d.callback;if("function"==typeof r){d.callback=null,p=d.priorityLevel;var o=r(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?d.callback=o:d===a(c)&&s(c),w(n)}else s(c);d=a(c)}if(null!==d)var l=!0;else{var f=a(u);null!==f&&M(S,f.startTime-n),l=!1}return l}finally{d=null,p=i,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,x=null,E=-1,D=5,_=-1;function O(){return!(t.unstable_now()-_<D)}function z(){if(null!==x){var e=t.unstable_now();_=e;var n=!0;try{n=x(!0,e)}finally{n?k():(C=!1,x=null)}}else C=!1}if("function"==typeof y)k=function(){y(z)};else if("undefined"!=typeof MessageChannel){var B=new MessageChannel,P=B.port2;B.port1.onmessage=z,k=function(){P.postMessage(null)}}else k=function(){m(z,0)};function I(e){x=e,C||(C=!0,k())}function M(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,I(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var r=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?r+i:r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:f++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>r?(e.sortIndex=i,n(u,e),null===a(c)&&e===a(u)&&(b?(g(E),E=-1):b=!0,M(S,i-r))):(e.sortIndex=o,n(c,e),v||h||(v=!0,I(T))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},3840:(e,t,n)=>{e.exports=n(53)},8913:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{De:()=>y,Dk:()=>S,E_:()=>w,O0:()=>d,XS:()=>h,bb:()=>v,nF:()=>p});var s=n(7294),i=n(9362);const{readConfigText:e,writeConfigText:r}=await n.e(457).then(n.bind(n,4637)),o=["torrents","filetree","filetreebrief","trackers","peers"],l=["种子状态","数据目录","用户标签","服务器分布","错误分布"],c=["全部","下载中","已暂停","已完成","正在校验","活动中","未活动","工作中","错误","磁力链接"],u=["连接状态","下载速度","上传速度","剩余空间","列表总大小","选中大小"],f=["常规","文件","块","用户","Tracker","分割","数据统计"],d=["最小化","隐藏"],p=["隐藏","关闭","退出"],h=["默认关","默认开","记住选择"],v=["静态","动态","多颜色"],b={torrents:{sizeWhenDone:!1,leftUntilDone:!1,downloadedEver:!1,uploadedEver:!1,simpleRatio:!1,eta:!1,tracker:!1,trackerStatus:!1,doneDate:!1,activityDate:!1,downloadDir:!1,id:!1,queuePosition:!1,isPrivate:!1,group:!1,"file-count":!1,pieceCount:!1,metadataPercentComplete:!1},peers:{flagStr:!1,cachedFrom:!1,cachedConnection:!1,cachedProtocol:!1}},m=[],g={servers:[],app:{window:{size:[1024,800],position:void 0},openTabs:[],lastTab:0,deleteAdded:!1,toastNotifications:!0,toastNotificationSound:!0,showTrayIcon:!0,onMinimize:"最小化",onClose:"退出",fontSizeBase:.9,fontSize:.9},interface:{theme:void 0,tables:Object.fromEntries(o.map((e=>[e,{columns:[],columnVisibility:b[e]??{},columnOrder:[],columnSizes:{},sortBy:[]}]))),sashSizes:{vertical:[70,30],horizontal:[20,80]},filterSections:l.map((e=>({section:e,visible:!0}))),statusFiltersVisibility:Object.fromEntries(c.map((e=>[e,!["工作中","磁力链接"].includes(e)]))),compactDirectories:!1,hideSubDirTorrents:!1,showFilterGroupSize:!0,selectFilterGroupOnDbClk:!0,showRunStatus:!0,statusBarSections:u.map((e=>({section:e,visible:!0}))),statusBarGlobalSpeeds:!0,showFiltersPanel:!0,showDetailsPanel:!0,detailsTabs:f.map((e=>({section:e,visible:!0}))),showFilesSearchBox:!1,flatFileTree:!1,mainSplit:"vertical",skipAddDialog:!1,deleteTorrentData:"默认关",deleteTorrentDataSelection:!1,deleteTorrentDataWhenOneSelection:!1,numLastSaveDirs:20,sortLastSaveDirs:!1,preconfiguredLabels:[],defaultTrackers:[...m],styleOverrides:{dark:{},light:{}},progressbarStyle:"动态"}};class y{values=g;async read(){const t=(await n.e(202).then(n.bind(n,228))).default;try{const n=await e();t(this.values,JSON.parse(n));const a=this.values.interface.styleOverrides;void 0!==a.color&&(a[this.values.interface.theme??"light"].color=a.color,a.color=void 0),void 0!==a.backgroundColor&&(a[this.values.interface.theme??"light"].backgroundColor=a.backgroundColor,a.backgroundColor=void 0),void 0!==this.values.openTabs&&(this.values.app.openTabs=this.values.openTabs,this.values.openTabs=void 0)}catch(e){console.log(e)}this.values.app.openTabs=this.values.app.openTabs.filter((e=>void 0!==this.values.servers.find((t=>t.name===e)))),this.values.servers=this.values.servers.map((e=>({...e,connection:{...e.connection,password:(0,i.p4)(e.connection.password)}}))),this.values.app.lastTab>=this.values.app.openTabs.length&&(this.values.app.lastTab=-1);for(const e of l)this.values.interface.filterSections.find((t=>t.section==e))||this.values.interface.filterSections.push({section:e,visible:!0});this.values.interface.filterSections=this.values.interface.filterSections.filter((e=>l.indexOf(e.section)>=0));for(const e of f)this.values.interface.detailsTabs.find((t=>t.section==e))||this.values.interface.detailsTabs.push({section:e,visible:!0});this.values.interface.detailsTabs=this.values.interface.detailsTabs.filter((e=>f.indexOf(e.section)>=0));for(const e of u)this.values.interface.statusBarSections.find((t=>t.section==e))||this.values.interface.statusBarSections.push({section:e,visible:!0});return this.values.interface.statusBarSections=this.values.interface.statusBarSections.filter((e=>u.indexOf(e.section)>=0)),this}async save(){const e={...this.values};e.servers=e.servers.map((e=>({...e,connection:{...e.connection,password:(0,i.H6)(e.connection.password)}})));const t=JSON.stringify(e,null,"    ");await r(t)}getTheme(){return this.values.interface.theme}setTheme(e){this.values.interface.theme=e}getSashSizes(e){return this.values.interface.sashSizes[e]}setSashSizes(e,t){this.values.interface.sashSizes[e]=t}getServers(){return this.values.servers}getOpenServers(){return this.values.servers.filter((e=>this.values.app.openTabs.includes(e.name)))}setServers(e){this.values.servers=e}getServer(e){return this.values.servers.find((t=>t.name===e))}getOpenTabs(){return this.values.app.openTabs}getLastOpenTab(){return this.values.app.openTabs[this.values.app.lastTab]}setOpenTabs(e,t){this.values.app.openTabs=e,this.values.app.lastTab=t}setTableColumnSizes(e,t){this.values.interface.tables[e].columnSizes=t}getTableColumnSizes(e){return this.values.interface.tables[e].columnSizes}setTableColumnVisibility(e,t){this.values.interface.tables[e].columnVisibility=t}getTableColumnVisibility(e){return this.values.interface.tables[e].columnVisibility}setTableColumnOrder(e,t){this.values.interface.tables[e].columnOrder=t}getTableColumnOrder(e){return this.values.interface.tables[e].columnOrder}setTableSortBy(e,t){this.values.interface.tables[e].sortBy=t}getTableSortBy(e){return this.values.interface.tables[e].sortBy}addSaveDir(e,t){const n=this.removeSaveDir(e,t);if(void 0!==n)for(n.unshift(t);n.length>this.values.interface.numLastSaveDirs;)n.pop()}removeSaveDir(e,t){const n=this.getServer(e)?.lastSaveDirs;if(void 0===n)return;const a=n.findIndex((e=>e===t));return a>=0&&n.splice(a,1),n}}const w=s.createContext(new y),S=s.createContext({connection:{url:"",username:"",password:""},name:"",pathMappings:[],expandedDirFilters:[],lastSaveDirs:[],intervals:{session:0,torrents:0,torrentsMinimized:0,details:0}});a()}catch(e){a(e)}}),1)},2629:(e,t,n)=>{n.a(e,(async(e,t)=>{try{n(5769);var a=n(8913),s=n(745),i=n(7294),r=e([a]);a=(r.then?(await r)():r)[0];const{TAURI:o,appWindow:l,invoke:c}=await n.e(457).then(n.bind(n,4637)),u=(0,i.lazy)((async()=>await Promise.all([n.e(671),n.e(504),n.e(21),n.e(284),n.e(917),n.e(207),n.e(989),n.e(980),n.e(434),n.e(737)]).then(n.bind(n,1434)))),f=(0,i.lazy)((async()=>await Promise.all([n.e(671),n.e(504),n.e(21),n.e(284),n.e(917),n.e(207),n.e(989),n.e(980),n.e(434),n.e(776)]).then(n.bind(n,3879)))),d=(0,i.lazy)((async()=>await Promise.all([n.e(671),n.e(917),n.e(821)]).then(n.bind(n,3821))));async function p(e,t){await t.save(),await l.emit("listener-pause",{}),e.unmount();const n=t.getOpenServers().map((e=>({name:e.name,connection:e.connection,interval:e.intervals.torrentsMinimized})));await c("set_poller_config",{configs:n,toast:t.values.app.toastNotifications,sound:t.values.app.toastNotificationSound}),l.emit("frontend-done")}async function h(e,t){e||"隐藏"!==t.values.app.onMinimize||await l.isMinimized()&&(l.emit("window-hidden"),l.hide())}function v(e,t){l.onCloseRequested((n=>{"隐藏"===e.values.app.onClose?(n.preventDefault(),l.emit("window-hidden"),l.hide()):"退出"===e.values.app.onClose?(n.preventDefault(),e.save().finally((()=>{l.emit("app-exit")}))):p(t,e)})),l.listen("exit-requested",(n=>{p(t,e)})),l.onFocusChanged((({payload:t})=>{h(t,e)})),l.onResized((({payload:t})=>{e.values.app.window.size=[t.width,t.height]})),l.onMoved((({payload:t})=>{e.values.app.window.position=[t.x,t.y]}))}function b(e){document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e.save().catch((e=>{}))}))}function m(){const e=(0,i.useContext)(a.E_).values.interface,t=e.theme,n=e.styleOverrides[t??"light"]?.backgroundColor,s={borderTopColor:`hsla(222, 100%, ${"dark"===t?"50%":"36%"}, 0.376)`};return i.createElement("div",{className:"loader-container",style:{backgroundColor:n?.computed??("dark"===t?"#1A1B1E":"#fff")}},i.createElement("div",{className:"lds-ring"},i.createElement("div",{style:s}),i.createElement("div",{style:s}),i.createElement("div",{style:s}),i.createElement("div",{style:s})))}async function g(e){const t=document.getElementById("app"),n=(0,s.s)(t);o?(v(e,n),e.values.app.showTrayIcon&&c("create_tray")):b(e);const r=e.values.app.window.size;2===r.length&&r[0]>100&&r[1]>100&&await l.setSize(r);const p=e.values.app.window.position;2===p?.length&&p?.[0]>-32e3&&p?.[1]>-32e3?await l.setPosition(p):await l.center(),n.render(i.createElement(i.StrictMode,null,i.createElement(a.E_.Provider,{value:e},i.createElement(i.Suspense,{fallback:i.createElement(m,null)},i.createElement(d,null,o&&i.createElement(u,null),!o&&i.createElement(f,null))))))}window.onload=e=>{(new a.De).read().then(g).catch(console.error)},t()}catch(y){t(y)}}),1)},9362:(e,t,n)=>{n.d(t,{DO:()=>C,H6:()=>S,Iy:()=>i,Nw:()=>c,QY:()=>p,Qh:()=>b,Tx:()=>g,V6:()=>m,dh:()=>l,e$:()=>o,jb:()=>v,kB:()=>h,l:()=>f,oU:()=>u,p4:()=>T,qj:()=>r,wy:()=>x});var a=n(7294);const s=["B","KB","MB","GB","TB","PB","EB"];function i(e){let t="",n=1;for(t of s){if(e<1024*n)break;n*=1024}const a=e/n;let i=2;return a>=100&&(i=1),a>=1e3&&(i=0),"B"===t&&(i=0),`${a.toFixed(i)} ${t}`}function r(e){return e<0?"∞":`${i(e)}/s`}function o(e,t=!0){let n={days:Math.floor(e/86400),hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:e%60};t&&(n.days>=10?n={days:n.days,hours:0,minutes:0,seconds:0}:n.days>0?n={...n,minutes:0,seconds:0}:(n.days>0||n.hours>0)&&(n.seconds=0));let a="";return n.days>0&&(a=`${n.days}d`),n.hours>0&&(a=(""!==a?a+" ":"")+`${n.hours}h`),n.minutes>0&&(a=(""!==a?a+" ":"")+`${n.minutes}m`),n.seconds>0&&(a=(""!==a?a+" ":"")+`${n.seconds}s`),a}function l(e){return 0===e?"-":new Date(1e3*e).toLocaleString()}function c(e){if(0===e.length)return"";let t="/";return e.includes("\\")&&(t="\\"),e.charAt(e.length-1)!==t?e+t:e}function u(){const[,e]=(0,a.useReducer)((e=>e+1),0);return e}function f(e,t,n){const a=Array.from(e),[s]=a.splice(t,1);return a.splice(n,0,s),a}function d(e){return e.replace(/\\/g,"/")}function p(e,t){let n=e;const a=d(e);for(const e of t.pathMappings)if(e.from.length>0&&a.startsWith(d(e.from))){n=e.to+n.substring(e.from.length);break}return n}function h(e,t){let n=e;const a=d(e);for(const e of t.pathMappings)if(e.to.length>0&&a.startsWith(d(e.to))){n=e.from+n.substring(e.to.length);break}return n}function v(e){return navigator.platform.startsWith("Mac")&&e.metaKey||!navigator.platform.startsWith("Mac")&&e.ctrlKey}function b(){return navigator.platform.startsWith("Mac")?"⌘":"ctrl"}function m(e){const t=e.substring(8).split("&").map((e=>{const t=e.indexOf("=");return[e.substring(0,t),e.substring(t+1)]}));let n=t.find((e=>"xt"===e[0]))?.[1]??"";return n=n.startsWith("urn:btih:")?n.substring(9).toLowerCase():"",{hash:n,trackers:t.filter((e=>"tr"===e[0]&&""!==e[1])).map((e=>decodeURIComponent(e[1])))}}function g(e,t){const n=new Set;e.forEach((e=>{e.forEach((e=>n.add(e)))}));const a=[...e];return t.forEach(((e,t)=>{if(t>=a.length){const t=e.filter((e=>!n.has(e)));t.length>0&&(a.push(t),t.forEach((e=>n.add(e))))}else e.forEach((e=>{n.has(e)||(a[t].push(e),n.add(e))}))})),a}const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w="HfxgnvteJy86p0ZPDdIYmc5r[kOj9EowACSWG7is%VNBXMhKFa2UlL31bzu4RQTq:";function S(e){const t=btoa(encodeURIComponent("TrguiNG:"+e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));let n="";for(const e of t)n+=w[y.indexOf(e)];return n}function T(e){let t="";for(const n of e){const a=w.indexOf(n);if(!(a>=0))return e;t+=y[a]}try{const a=(n=t,decodeURIComponent(Array.prototype.map.call(atob(n),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")));return a.startsWith("TrguiNG:")?a.substring(8):e}catch{return e}var n}const k=/[<>:"\\/|?*]/g;function C(e){return e.replace(k,"_")}function*x(...e){for(const t of e)yield*t}}},e=>{e.O(0,[374],(()=>(2629,e(e.s=2629)))),e.O()}]);